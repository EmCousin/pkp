<%= turbo_frame_tag dom_id(subscription, :row), class: "block border bg-white rounded-lg shadow-sm p-4" do %>
  <div class="relative">
    <div class="absolute top-0 right-0">
      <%= render 'admin/subscriptions/actions', subscription: %>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2">
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500">ID:</span>
        <%= link_to subscription.id, [:admin, subscription], class: "text-blue-600 hover:text-blue-800", data: { turbo_frame: '_top' } %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Member.human_attribute_name(:email) %>:</span>
        <%= mail_to subscription.member.email, subscription.member.email, class: "text-blue-600 hover:text-blue-800" %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Member.human_attribute_name(:level) %>:</span>
        <%= tag.div class: "w-4 h-4 border border-gray-400 rounded",
                    style: "background-color: #{subscription.member.level}",
                    title: Member.human_attribute_name(subscription.member.level) %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:member_id) %>:</span>
        <%= link_to [:admin, subscription.member], class: "flex items-center gap-2", data: { turbo_frame: '_top' } do %>
          <% if subscription.member.avatar.variable? %>
            <%= image_tag subscription.member.avatar.variant(:mini), class: "w-8 h-8 rounded-full" %>
          <% else %>
            <%= image_tag subscription.member.avatar, class: "w-8 h-8 rounded-full" %>
          <% end %>
          <span><%= subscription.member.full_name %></span>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <% if subscription.camp.present? %>
          <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:camp) %>:</span>
          <%= link_to subscription.camp.title, [:admin, subscription.camp], class: "text-blue-600 hover:text-blue-800", data: { turbo_frame: '_top' } %>
        <% else %>
          <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:course_ids) %>:</span>

          <% subscription.courses.each do |course| %>
            <%= link_to course.title, [:admin, course], class: "text-blue-600 hover:text-blue-800", data: { turbo_frame: '_top' } %>
            <span class="last:hidden">,</span>
          <% end %>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:fee) %>:</span>
        <span><%= number_to_currency(subscription.fee, unit: "â‚¬", separator: ",", format: "%n %u") %></span>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:year) %>:</span>
        <span><%= subscription.year %></span>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:status) %>:</span>
        <%= tag.span class: subscription.status_color do %>
          <%= Subscription.human_attribute_name(subscription.status) %>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= Subscription.human_attribute_name(:payment_method) %>:</span>
        <% if subscription.payment_method? %>
          <%= tag.span class: subscription.payment_method_color do %>
            <%= Subscription.human_attribute_name(subscription.payment_method) %>
          <% end %>
        <% else %>
          <span class="text-gray-500"><%= t('defaults.na') %></span>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= t('.terms') %>:</span>
        <% if subscription.terms_accepted_at? %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <%= t('.terms_accepted') %>
          </span>
        <% else %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-red-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3-9a1 1 0 00-1.414-1.414L10 8.586 8.414 7.586A1 1 0 007 9l1.586 1.586L7 12.172A1 1 0 108.414 13.586L10 12l1.586 1.586A1 1 0 1013 12.172l-1.586-1.586L13 9a1 1 0 000-1.414z" clip-rule="evenodd"/>
            </svg>
            <%= t('.terms_not_accepted') %>
          </span>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= t('.medical_certificate') %>:</span>
        <% if subscription.doctor_certified_at? %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <%= t('.medical_certified') %>
          </span>
        <% else %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-red-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3-9a1 1 0 00-1.414-1.414L10 8.586 8.414 7.586A1 1 0 007 9l1.586 1.586L7 12.172A1 1 0 108.414 13.586L10 12l1.586 1.586A1 1 0 1013 12.172l-1.586-1.586L13 9a1 1 0 000-1.414z" clip-rule="evenodd"/>
            </svg>
            <%= t('.medical_not_certified') %>
          </span>
        <% end %>
      </div>

      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-500"><%= t('.payment') %>:</span>
        <% if subscription.paid? %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L10 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <%= t('.paid') %>
          </span>
        <% elsif subscription.payment_proof.attached? %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3-9a1 1 0 00-1.414-1.414L10 8.586 8.414 7.586A1 1 0 007 9l1.586 1.586L7 12.172A1 1 0 108.414 13.586L10 12l1.586 1.586A1 1 0 1013 12.172l-1.586-1.586L13 9a1 1 0 000-1.414z" clip-rule="evenodd"/>
            </svg>
            <%= link_to rails_blob_path(subscription.payment_proof, disposition: "attachment"), class: "group flex items-center space-x-1" do %>
              <span class="text-yellow-600 group-hover:text-yellow-800"><%= t('.uploaded_payment_proof') %></span>
              <svg class="w-4 h-4 ml-1 text-yellow-600 group-hover:text-yellow-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"/>
              </svg>
            <% end %>
          </span>
        <% else %>
          <span class="flex items-center">
            <svg class="w-4 h-4 mr-1 text-red-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3-9a1 1 0 00-1.414-1.414L10 8.586 8.414 7.586A1 1 0 007 9l1.586 1.586L7 12.172A1 1 0 108.414 13.586L10 12l1.586 1.586A1 1 0 1013 12.172l-1.586-1.586L13 9a1 1 0 000-1.414z" clip-rule="evenodd"/>
            </svg>
            <%= t('.not_paid') %>
          </span>
        <% end %>
      </div>

      <% if subscription.stripe_payment_intent_id? %>
        <%= link_to subscription.stripe_payment_intent_url, class: "group flex items-center space-x-1" do %>
          <span class="text-blue-600 group-hover:text-blue-800"><%= t('.stripe_payment_intent_url') %></span>
          <svg class="w-4 h-4 ml-1 text-blue-600 group-hover:text-blue-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4"/>
          </svg>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
