<tr class=<%= subscription.status_color %>>
  <td><%= link_to subscription.id , admin_subscription_path(subscription.id), data: { turbo_frame: '_top' } %></td>
  <td>
    <%= link_to [:admin, subscription.member] do %>
      <% if subscription.member.avatar.variable? %>
        <%= image_tag subscription.member.avatar.variant(:mini), width: "30" %>
      <% else %>
        <%= image_tag subscription.member.avatar, width: "30" %>
      <% end %>
    <% end %>
  </td>
  <td>
    <%= link_to admin_member_path(subscription.member_id), data: { turbo_frame: '_top' } do %>
      <%= subscription.member.full_name %>
    <% end %>
  </td>
  <td><%= mail_to subscription.member.email, subscription.member.email %></td>
  <td><%= Subscription.human_attribute_name(subscription.status) %></td>
  <td>
    <div class="dropdown mr-1">
      <a type="button" class="dropdown-toggle" id="dropdownMenuOffset" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><%= t('defaults.action') %></a>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuOffset">
        <%= link_to t('defaults.edit'),
                    [:edit, :admin, subscription],
                    class: "dropdown-item",
                    data: { turbo_frame: '_top' } %>

        <%= button_to t('defaults.confirmed_bank_check'),
                      {
                        controller: 'admin/subscriptions',
                        action: 'update',
                        id: subscription.id,
                        no_notification: true,
                        subscription: { status: 'confirmed_bank_check' }
                      },
                      method: :put,
                      class: "dropdown-item text-success" %>
        <%= button_to t('defaults.confirmed_cash'),
                      {
                        controller: 'admin/subscriptions',
                        action: 'update',
                        id: subscription.id,
                        no_notification: true,
                        subscription: { status: 'confirmed_cash' }
                      },
                      method: :put,
                      class: "dropdown-item text-info" %>
        <%= button_to t('defaults.archive'),
                      {
                        controller: 'admin/subscriptions',
                        action: 'update',
                        id: subscription.id,
                        no_notification: true,
                        subscription: { status: 'archived' }
                      },
                      method: :put,
                      class: "dropdown-item text-danger" %>

        <%= button_to t('.remove_from_course'),
                      unlink_course_admin_subscription_path(subscription.id, course_id: @course.id),
                      method: :delete,
                      data: {
                        controller: :confirm,
                        confirm_message_value: t(
                          '.remove_from_course_are_you_sure',
                          member_full_name: subscription.member.full_name, course_title: @course.title
                        )
                      },
                      class: "dropdown-item text-danger",
                      data: { turbo_frame: :course_subscriptions } %>

        <%= button_to t('defaults.destroy'),
                      [:admin, subscription],
                      method: :delete,
                      data: {
                        controller: :confirm,
                        confirm_message_value: t('defaults.are_you_sure')
                      },
                      class: "dropdown-item text-danger",
                      data: { turbo_frame: :course_subscriptions } %>
      </div>
    </div>
  </td>
</tr>
